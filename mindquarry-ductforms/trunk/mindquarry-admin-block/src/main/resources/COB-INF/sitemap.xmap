<?xml version="1.0" encoding="UTF-8"?>
<!-- Copyright (C) 2005 MindQuarry GmbH, All Rights Reserved -->

<map:sitemap xmlns:map="http://apache.org/cocoon/sitemap/1.0">

	<map:flow language="javascript">
		<map:script src="admin.js" />
	</map:flow>
	<map:pipelines>
		<!-- use noncaching pipeline -->
		<map:pipeline type="noncaching">



			<!-- repository listing -->
			<map:match pattern="">
				<map:call function="handleForm">
					<map:parameter name="function" value="manageProjects" />
					<map:parameter name="definitionURI"
						value="forms/admin-form.xml" />
				</map:call>
			</map:match>
			
			<map:match pattern="*.instance">
				<map:generate type="jx" src="forms/{1}-template.xml"
					label="content1">
					<map:parameter name="locale"
						value="{flow-attribute:locale}" />
				</map:generate>

				<map:transform src="xslt/forms/form2html.xsl">
					<map:parameter name="resources-uri"
						value="{request:contextPath}/_cocoon/resources" />
				</map:transform>

				<map:serialize type="html" />
			</map:match>
			
			
						<map:match pattern="resources/*/**">
				<map:read src="{1}/{2}" />
			</map:match>

			<!-- Continue a scenario. The continuation id is passed in the URL
				(typically used for GET requests) -->
			<map:match pattern="*.continue">
				<map:call continuation="{1}" />
			</map:match>

			<!-- Continue a scenario. The continuation id is passed as a request
				parameter (typically used for POST request) -->
			<map:match pattern="continue">
				<map:call continuation="{1}" />
			</map:match>
			
		</map:pipeline>

	</map:pipelines>

</map:sitemap>