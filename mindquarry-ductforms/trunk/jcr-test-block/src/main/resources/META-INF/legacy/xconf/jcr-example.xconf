<?xml version="1.0"?>
<components>
  <include src="resource://org/apache/cocoon/jcr/jcr.roles"/>

  <source-factories>
    <!-- component-instance class="org.apache.cocoon.jcr.source.xml.JCRXMLSourceFactory" name="jcr">
      <versionize element="wiki" />
      <versionize element="task" />
    </component-instance -->

    <!--component-instance class="org.apache.cocoon.jcr.source.JCRSourceFactory" name="jcr"-->
    <component-instance class="org.apache.excalibur.source.impl.jcr.JCRSourceFactory" name="jcr">
      <folder-node type="rep:root" new-file="nt:file"
          new-folder="nt:folder" />
      <folder-node type="nt:folder" new-file="nt:file" />
      <file-node type="nt:file" content-path="jcr:content"
          content-type="nt:resource" />
      <file-node type="nt:linkedFile" content-ref="jcr:content" />
      <content-node type="nt:resource" content-prop="jcr:data"
          mimetype-prop="jcr:mimeType" lastmodified-prop="jcr:lastModified"
          validity-prop="jcr:lastModified" />
    </component-instance>
  </source-factories>

  <jcr-repository class="org.apache.cocoon.jcr.JackrabbitRepository">
    <credentials login="expression" password="expression"/>
    <home src="context://repository"/>
    <jaas src="resource://COB-INF/jaas.config"/>
    <configuration src="resource://COB-INF/repository.xml"/>
  </jcr-repository>
  
<!-- 
    <component-instance exported="false" name="jcr-repository" class="org.apache.cocoon.components.flow.javascript.fom.FOM_JavaScriptInterpreter">

    </component-instance>
  -->
</components>