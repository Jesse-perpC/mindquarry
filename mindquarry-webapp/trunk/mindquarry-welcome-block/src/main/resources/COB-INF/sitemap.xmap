<?xml version="1.0" encoding="UTF-8"?>
<!--
	Copyright (C) 2006 MindQuarry GmbH, All Rights Reserved
-->
<map:sitemap xmlns:map="http://apache.org/cocoon/sitemap/1.0">

	<map:pipelines>

		<!-- resources pipeline / use noncaching for debugging -->
		<!-- <map:pipeline type="noncaching">
			<map:match pattern="css/*.css">
				<map:read
					src="resource://com/mindquarry/webapp/css/{1}.css" />
			</map:match>
			<map:match pattern="images/*.*">
				<map:read
					src="resource://com/mindquarry/webapp/images/{1}.{2}" />
			</map:match>
			<map:match pattern="icons/*.*">
				<map:read
					src="resource://com/mindquarry/webapp/icons/{1}_icon.{2}" />
			</map:match>

		</map:pipeline> -->

		<map:pipeline>
			<map:match pattern="">
				<map:generate src="index.html" />
				<map:transform
					src="resource://com/mindquarry/webapp/xsl/html2html.xsl">
	        		<map:parameter name="fullPath" value="{block-path:}{request:pathInfo}"/>
	        		<map:parameter name="sitemapPath" value="{request:pathInfo}"/>
					<map:parameter name="user.agent" value="{request-header:User-Agent}" />
				</map:transform>
				<map:serialize type="xhtml" />
			</map:match>

			<!--+
				| NOTE: mounting is done by the DispatcherServlet/BlockServlets
				|       now, no Sitemap mounting needed anymore
				+-->

			<!-- mount all deployed blocks -->
			<!-- blocks/mindquarry-irgendwas/resource -->
			<!-- <map:match pattern="*/*/**">
				<map:mount src="{1}/{2}/" uri-prefix="{1}/{2}" />
			</map:match> -->

			<!-- mount all development blocks with absolute src -->
			<!-- <map:match pattern="blocks/mindquarry-tasks-block/**">
				<map:mount uri-prefix="blocks/mindquarry-tasks-block"
				src="file:/Users/alex/Mindquarry/hack/mindquarry-tasks/mindquarry-tasks-block/src/main/resources/COB-INF/" />
			</map:match> -->

			<!--+
				| forward any unknown stuff to the super block 
				| NOTE: This must be the last matcher!
				+-->
			<!-- <map:match pattern="**">
				<map:read src="block:super:/{1}" />
			</map:match> -->

		</map:pipeline>
	</map:pipelines>

</map:sitemap>

